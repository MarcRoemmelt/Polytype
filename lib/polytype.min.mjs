// Polytype 0.3.1 â€“ https://github.com/fasttime/Polytype
function t(e,n){const o=q(n);for(const n of o)if(n===e||t(e,n))return!0;return!1}const e=[],n=Function.prototype,o=Map,r=Object,{create:s,defineProperties:c,defineProperty:i,getOwnPropertyDescriptors:u,getPrototypeOf:a,prototype:l,setPrototypeOf:f}=r,p=Proxy,y=Reflect,{construct:d,get:h,ownKeys:w,set:g}=y,m=Set,P=String,O=Symbol.hasInstance,b=TypeError,v=t=>n.call.bind(t),_=v(n.bind),$=v(n[O]),x=v(l.hasOwnProperty),j=v(l.valueOf),I=(t,e)=>{if(t.has(e)){const t=`Duplicate superclass ${Y(e)}`;throw b(t)}},L=t=>{if(!G(t))throw b("Argument is not a function")},M=(...t)=>{if(!t.length)throw b("No superclasses specified");const e=new m,r=new m;for(const n of t){if(I(e,n),!H(n)){const t=`${Y(n)} is not a constructor`;throw b(t)}const{prototype:t}=n;if(Q(t)){const t=`Property 'prototype' of ${Y(n)} is not an object or null`;throw b(t)}e.add(n),null!==t&&r.add(t)}const i=function(t,e){const n=function(t){return F(class{static _(e){if(!t.has(e))throw L(e),b("Argument is not a direct superclass");return E(e,this)}}._,"name","class",!1)}(t),r=A(t),i=function(t){return F(class{static _(e){L(e);const{prototype:n}=e;if(!t.has(n)){const t=V(n)?"Property 'prototype' of argument does not match any direct superclass":"Property 'prototype' of argument is not an object";throw b(t)}return E(n,this)}}._,"name","class",!1)}(e),u=function(t){const e=function(...e){const n=function(t,e){const n=new o;let r,s;const c=t=>{if(r===!t)throw b("Mixed argument styles");r=t};for(const o of e){if(U(o))throw b("Invalid arguments");let e,r;if(void 0!==o&&V(e=o.super)){if(c(!0),I(n,e),!t.has(e)){const t=`${Y(e)} is not a direct superclass`;throw b(t)}if(r=o.arguments,U(r)){const t=`Invalid arguments for superclass ${Y(e)}`;throw b(t)}}else c(!1),s||(s=t.values()),e=s.next().value,r=o;const i=void 0!==r?D(r):void 0;n.set(e,i)}return n}(t,e),r=new.target;for(const e of t){const t=n.get(e),o=T(e,t,r),s=w(o);for(const t of s)x(this,t)&&delete o[t];c(this,o)}};return f(e,null),e}(t),a=C(u,t,k),l=s(null,{constructor:R(a,!0,!1,!0),class:R(i)}),p=C(l,e,S),y={class:R(n),name:{get:r},prototype:R(p)};return c(u,y),a}(e,r);return function t(e){let o=!1;for(const r of e)r!==n&&V(r)&&(o=!0,t(q(r))||N(r));return o}(t),i},S={setPrototypeOf:()=>!1},k={__proto__:S,apply:()=>{throw b("Constructor cannot be invoked without 'new'")}},A=t=>()=>`(${[...t].map(({name:t})=>P(t))})`,D=n.apply.bind((...t)=>t,null),C=(t,e,n)=>{const o=((t,e)=>({__proto__:e,get(e,n,o){const r=t.find(tt(n));if(void 0!==r)return h(r,n,o)},has:(e,n)=>t.some(tt(n)),set(e,n,o,r){const s=t.find(tt(n));return void 0!==s?g(s,n,o,r):(F(r,n,o,!0,!0),!0)}}))([t,...e],n),r=new p(t,o);return et.set(r,e),r},E=(t,e)=>{const n=t=>{const n=t();return f(r,e),n},o=new p(e,{get:(o,r)=>n(()=>h(t,r,e)),set:(o,r,s)=>n(()=>g(t,r,s,e))}),r=s(o);return r},F=(t,e,n,o=!0,r=!1)=>i(t,e,R(n,o,r,!0)),K=()=>{const t="undefined"==typeof self?global:self;return!t.hasOwnProperty("classes")&&(F(t,"classes",M),F(r,"getPrototypeListOf",W),!0)},N=t=>F(t,O,z),R=(t,e,n,o)=>({value:t,writable:e,enumerable:n,configurable:o}),T=(t,n=e,o)=>u(d(t,n,o)),{getPrototypeListOf:W}={getPrototypeListOf:t=>{let e;{const n=a(t);if(null!==n){const t=et.get(n);e=t?[...t]:[n]}else e=[]}return e}},q=t=>{let n=et.get(t);if(!n){const o=a(t);n=null!==o?[o]:e}return n},{[O]:z}=class{static[O](e){B=!0;try{if(G(this)){const n=$(this,e);if(!B)return n;if(n||V(e)&&t(this.prototype,e))return!0}return!1}finally{B=!1}}};let B=!1;const G=t=>"function"==typeof t,H=t=>{if(G(t)){const e=_(t);F(e,"prototype",null);const n=new p(e,{construct(){return this}});try{return new class extends n{},!0}catch(t){}}return!1},J=t=>!Z.includes(typeof t),Q=t=>void 0===t||J(t),U=t=>null===t||J(t),V=t=>null!==t&&!Q(t),{isPrototypeOf:X}=class{static isPrototypeOf(e){return!(!V(e)||!t(j(this),e))}},Y=t=>{let e;return G(t)&&(({name:e}=t),null!=e&&(e=P(e)))?e:e=P(t)},Z=["function","object","undefined"],tt=t=>e=>t in e,et=new WeakMap;F(M,"name","classes",!1),N(r),F(l,"isPrototypeOf",X);export{M as classes,K as defineGlobally,W as getPrototypeListOf};
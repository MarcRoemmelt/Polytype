// Polytype 0.5.0 â€“ https://github.com/fasttime/Polytype
function t(e,o){if(B(e))return!1;if(o.has(e))return!0;o.add(e);const n=z(e);let r=!1;for(const e of n)Y(e)&&t(e,o)&&(r=!0);return r||R(e),!0}function e(t,o){const n=z(o);for(const o of n)if(o===t||e(t,o))return!0;return!1}const o=[],n=Function.prototype,r=Map,s=Object,{create:c,defineProperties:i,defineProperty:u,getOwnPropertyDescriptors:a,getPrototypeOf:f,prototype:l,setPrototypeOf:p}=s,y=Proxy,d=Reflect,{construct:h,get:w,ownKeys:g,set:m}=d,P=Set,b=String,O=Symbol.hasInstance,v=TypeError,_=t=>n.call.bind(t),$=_(n.bind),x=_(n[O]),j=_(l.hasOwnProperty),k=_(l.valueOf),I=(t,e)=>{if(t.has(e)){const t=`Duplicate superclass ${tt(e)}`;throw v(t)}},L=t=>{if(!J(t))throw v("Argument is not a function")},M=(...e)=>{if(!e.length)throw v("No superclasses specified");const o=new P,n=new P;for(const t of e){if(I(o,t),!Q(t)){const e=`${tt(t)} is not a constructor`;throw v(e)}const{prototype:e}=t;if(V(e)){const e=`Property 'prototype' of ${tt(t)} is not an object or null`;throw v(e)}o.add(t),null!==e&&n.add(e)}const s=function(t,e){const o=function(t){return K(class{static _(e){if(!t.has(e))throw L(e),v("Argument is not a direct superclass");return F(e,this)}}._,"name","class",!1)}(t),n=D(t),s=function(t){return K(class{static _(e){L(e);const{prototype:o}=e;if(!t.has(o)){const t=Y(o)?"Property 'prototype' of argument does not match any direct superclass":"Property 'prototype' of argument is not an object";throw v(t)}return F(o,this)}}._,"name","class",!1)}(e),u=function(t){const e=function(...e){const o=function(t,e){const o=new r;let n,s;const c=t=>{if(n===!t)throw v("Mixed argument styles");n=t};for(const n of e){if(X(n))throw v("Invalid arguments");let e,r;if(void 0!==n&&Y(e=n.super)){if(c(!0),I(o,e),!t.has(e)){const t=`${tt(e)} is not a direct superclass`;throw v(t)}if(r=n.arguments,X(r)){const t=`Invalid arguments for superclass ${tt(e)}`;throw v(t)}}else c(!1),s||(s=t.values()),e=s.next().value,r=n;const i=void 0!==r?C(r):void 0;o.set(e,i)}return o}(t,e),n=new.target;for(const e of t){const t=o.get(e),r=W(e,t,n),s=g(r);for(const t of s)j(this,t)&&delete r[t];i(this,r)}};return p(e,null),e}(t),a=E(u,t,A),f=c(null,{constructor:T(a,!0,!1,!0),class:T(s)}),l=E(f,e,S),y={class:T(o),name:{get:n},prototype:T(l)};return i(u,y),a}(o,n);return function(...e){const o=new P,n=new P;for(const r of e)for(let e of r)for(;!o.has(e);){o.add(e);const r=e.constructor;if(Q(r)&&t(r,n),e=f(e),!Y(e))break}}(o,n),s},S={setPrototypeOf:()=>!1},A={__proto__:S,apply:()=>{throw v("Constructor cannot be invoked without 'new'")}},D=t=>()=>`(${[...t].map(({name:t})=>b(t))})`,C=n.apply.bind((...t)=>t,null),E=(t,e,o)=>{const n=((t,e)=>({__proto__:e,get(e,o,n){const r=t.find(ot(o));if(void 0!==r)return w(r,o,n)},has:(e,o)=>t.some(ot(o)),set(e,o,n,r){const s=t.find(ot(o));return void 0!==s?m(s,o,n,r):(K(r,o,n,!0,!0),!0)}}))([t,...e],o),r=new y(t,n);return nt.set(r,e),r},F=(t,e)=>{const o=t=>{const o=t();return p(r,e),o},n=new y(e,{get:(n,r)=>o(()=>w(t,r,e)),set:(n,r,s)=>o(()=>m(t,r,s,e))}),r=c(n);return r},K=(t,e,o,n=!0,r=!1)=>u(t,e,T(o,n,r,!0)),N=()=>{const t="undefined"==typeof self?global:self;return!t.hasOwnProperty("classes")&&(K(t,"classes",M),K(s,"getPrototypeListOf",q),!0)},R=t=>K(t,O,G),T=(t,e,o,n)=>({value:t,writable:e,enumerable:o,configurable:n}),W=(t,e=o,n)=>a(h(t,e,n)),{getPrototypeListOf:q}={getPrototypeListOf:t=>{let e;{const o=f(t);if(null!==o){const t=nt.get(o);e=t?[...t]:[o]}else e=[]}return e}},z=t=>{let e=nt.get(t);if(!e){const n=f(t);e=null!==n?[n]:o}return e},B=t=>J(t)&&j(t,"apply")&&j(t,"bind")&&j(t,"call")&&!j(t,"prototype")&&j(t,O),{[O]:G}=class{static[O](t){H=!0;try{if(J(this)){const o=x(this,t);if(!H)return o;if(o||Y(t)&&e(this.prototype,t))return!0}return!1}finally{H=!1}}};let H=!1;const J=t=>"function"==typeof t,Q=t=>{if(J(t)){const e=$(t);K(e,"prototype",null);const o=new y(e,{construct(){return this}});try{return new class extends o{},!0}catch(t){}}return!1},U=t=>!et.includes(typeof t),V=t=>void 0===t||U(t),X=t=>null===t||U(t),Y=t=>null!==t&&!V(t),{isPrototypeOf:Z}=class{static isPrototypeOf(t){return!(!Y(t)||!e(k(this),t))}},tt=t=>{let e;return J(t)&&(({name:e}=t),null!=e&&(e=b(e)))?e:e=b(t)},et=["function","object","undefined"],ot=t=>e=>t in e,nt=new WeakMap;K(M,"name","classes",!1),K(l,"isPrototypeOf",Z);export{M as classes,N as defineGlobally,q as getPrototypeListOf};
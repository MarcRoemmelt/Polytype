// Polytype 0.5.0 â€“ https://github.com/fasttime/Polytype
function t(e,n){if(G(e))return!1;if(n.has(e))return!0;n.add(e);const o=B(e);let r=!1;for(const e of o)Z(e)&&t(e,n)&&(r=!0);return r||T(e),!0}function e(e,n){for(const o of e){const e=o.constructor;U(e)&&t(e,n)}}function n(t,e){const o=B(e);for(const e of o)if(e===t||n(t,e))return!0;return!1}const o=[],r=Function.prototype,s=Map,c=Object,{create:i,defineProperties:u,defineProperty:a,getOwnPropertyDescriptors:l,getPrototypeOf:f,prototype:p,setPrototypeOf:y}=c,d=Proxy,h=Reflect,{construct:w,get:g,ownKeys:m,set:P}=h,b=Set,O=String,v=Symbol.hasInstance,_=TypeError,$=t=>r.call.bind(t),x=$(r.bind),j=$(r[v]),I=$(p.hasOwnProperty),L=$(p.valueOf),M=(t,e)=>{if(t.has(e)){const t=`Duplicate superclass ${et(e)}`;throw _(t)}},S=t=>{if(!Q(t))throw _("Argument is not a function")},k=(...t)=>{if(!t.length)throw _("No superclasses specified");const n=new b,o=new b;for(const e of t){if(M(n,e),!U(e)){const t=`${et(e)} is not a constructor`;throw _(t)}const{prototype:t}=e;if(X(t)){const t=`Property 'prototype' of ${et(e)} is not an object or null`;throw _(t)}n.add(e),null!==t&&o.add(t)}const r=function(t,e){const n=function(t){return N(class{static _(e){if(!t.has(e))throw S(e),_("Argument is not a direct superclass");return K(e,this)}}._,"name","class",!1)}(t),o=C(t),r=function(t){return N(class{static _(e){S(e);const{prototype:n}=e;if(!t.has(n)){const t=Z(n)?"Property 'prototype' of argument does not match any direct superclass":"Property 'prototype' of argument is not an object";throw _(t)}return K(n,this)}}._,"name","class",!1)}(e),c=function(t){const e=function(...e){const n=function(t,e){const n=new s;let o,r;const c=t=>{if(o===!t)throw _("Mixed argument styles");o=t};for(const o of e){if(Y(o))throw _("Invalid arguments");let e,s;if(void 0!==o&&Z(e=o.super)){if(c(!0),M(n,e),!t.has(e)){const t=`${et(e)} is not a direct superclass`;throw _(t)}if(s=o.arguments,Y(s)){const t=`Invalid arguments for superclass ${et(e)}`;throw _(t)}}else c(!1),r||(r=t.values()),e=r.next().value,s=o;const i=void 0!==s?E(s):void 0;n.set(e,i)}return n}(t,e),o=new.target;for(const e of t){const t=n.get(e),r=q(e,t,o),s=m(r);for(const t of s)I(this,t)&&delete r[t];u(this,r)}};return y(e,null),e}(t),a=F(c,t,D),l=i(null,{constructor:W(a,!0,!1,!0),class:W(r)}),f=F(l,e,A),p={class:W(n),name:{get:o},prototype:W(f)};return u(c,p),a}(n,o);{const t=new b;e(n,t),e(o,t)}return r},A={setPrototypeOf:()=>!1},D={__proto__:A,apply:()=>{throw _("Constructor cannot be invoked without 'new'")}},C=t=>()=>`(${[...t].map(({name:t})=>O(t))})`,E=r.apply.bind((...t)=>t,null),F=(t,e,n)=>{const o=((t,e)=>({__proto__:e,get(e,n,o){const r=t.find(ot(n));if(void 0!==r)return g(r,n,o)},has:(e,n)=>t.some(ot(n)),set(e,n,o,r){const s=t.find(ot(n));return void 0!==s?P(s,n,o,r):(N(r,n,o,!0,!0),!0)}}))([t,...e],n),r=new d(t,o);return rt.set(r,e),r},K=(t,e)=>{const n=t=>{const n=t();return y(r,e),n},o=new d(e,{get:(o,r)=>n(()=>g(t,r,e)),set:(o,r,s)=>n(()=>P(t,r,s,e))}),r=i(o);return r},N=(t,e,n,o=!0,r=!1)=>a(t,e,W(n,o,r,!0)),R=()=>{const t="undefined"==typeof self?global:self;return!t.hasOwnProperty("classes")&&(N(t,"classes",k),N(c,"getPrototypeListOf",z),!0)},T=t=>N(t,v,H),W=(t,e,n,o)=>({value:t,writable:e,enumerable:n,configurable:o}),q=(t,e=o,n)=>l(w(t,e,n)),{getPrototypeListOf:z}={getPrototypeListOf:t=>{let e;{const n=f(t);if(null!==n){const t=rt.get(n);e=t?[...t]:[n]}else e=[]}return e}},B=t=>{let e=rt.get(t);if(!e){const n=f(t);e=null!==n?[n]:o}return e},G=t=>Q(t)&&I(t,"apply")&&I(t,"bind")&&I(t,"call")&&!I(t,"prototype")&&I(t,v),{[v]:H}=class{static[v](t){J=!0;try{if(Q(this)){const e=j(this,t);if(!J)return e;if(e||Z(t)&&n(this.prototype,t))return!0}return!1}finally{J=!1}}};let J=!1;const Q=t=>"function"==typeof t,U=t=>{if(Q(t)){const e=x(t);N(e,"prototype",null);const n=new d(e,{construct(){return this}});try{return new class extends n{},!0}catch(t){}}return!1},V=t=>!nt.includes(typeof t),X=t=>void 0===t||V(t),Y=t=>null===t||V(t),Z=t=>null!==t&&!X(t),{isPrototypeOf:tt}=class{static isPrototypeOf(t){return!(!Z(t)||!n(L(this),t))}},et=t=>{let e;return Q(t)&&(({name:e}=t),null!=e&&(e=O(e)))?e:e=O(t)},nt=["function","object","undefined"],ot=t=>e=>t in e,rt=new WeakMap;N(k,"name","classes",!1),N(p,"isPrototypeOf",tt);export{k as classes,R as defineGlobally,z as getPrototypeListOf};
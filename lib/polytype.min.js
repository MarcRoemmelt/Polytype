// Polytype â€“ https://github.com/fasttime/Polytype
"use strict";(t=>{function e(t,o){const n=q(o);for(const o of n)if(o===t||e(t,o))return!0;return!1}if(t.hasOwnProperty("classes"))return;const o=[],n=Function.prototype,s=Map,r=Object,{create:c,defineProperties:i,defineProperty:u,getOwnPropertyDescriptors:a,getPrototypeOf:l,prototype:f,setPrototypeOf:p}=r,y=Proxy,d=Reflect,{construct:h,get:w,ownKeys:g,set:P}=d,m=Set,O=String,b=Symbol.hasInstance,v=TypeError,_=t=>n.call.bind(t),$=_(n.bind),j=_(n[b]),x=_(f.hasOwnProperty),I=_(f.valueOf),L=(t,e)=>{if(t.has(e)){const t=`Duplicate superclass ${Y(e)}`;throw v(t)}},M=t=>{if(!G(t))throw v("Argument is not a function")},S=(...t)=>{if(!t.length)throw v("No superclasses specified");const e=new m,o=new m;for(const n of t){if(L(e,n),!H(n)){const t=`${Y(n)} is not a constructor`;throw v(t)}const{prototype:t}=n;if(Q(t)){const t=`Property 'prototype' of ${Y(n)} is not an object or null`;throw v(t)}e.add(n),null!==t&&o.add(t)}const r=function(t,e){const o=function(t){const{class:e}=class{static class(e){if(!t.has(e))throw M(e),v("Argument is not a direct superclass");return F(e,this)}};return e}(t),n=D(t),r=function(t){const{class:e}=class{static class(e){M(e);const{prototype:o}=e;if(!t.has(o)){const t=V(o)?"Property 'prototype' of argument does not match any direct superclass":"Property 'prototype' of argument is not an object";throw v(t)}return F(o,this)}};return e}(e),u=function(t){const e=function(...e){const o=function(t,e){const o=new s;let n,r;const c=t=>{if(n===!t)throw v("Mixed argument styles");n=t};for(const n of e){if(U(n))throw v("Invalid arguments");let e,s;if(void 0!==n&&V(e=n.super)){if(c(!0),L(o,e),!t.has(e)){const t=`${Y(e)} is not a direct superclass`;throw v(t)}if(s=n.arguments,U(s)){const t=`Invalid arguments for superclass ${Y(e)}`;throw v(t)}}else c(!1),r||(r=t.values()),e=r.next().value,s=n;const i=void 0!==s?C(s):void 0;o.set(e,i)}return o}(t,e),n=new.target;for(const e of t){const t=o.get(e),s=T(e,t,n),r=g(s);for(const t of r)x(this,t)&&delete s[t];i(this,s)}};return p(e,null),e}(t),a=E(u,t,A),l=c(null,{constructor:R(a,!0,!1,!0),class:R(r)}),f=E(l,e,k),y={class:R(o),name:{get:n},prototype:R(f)};return i(u,y),a}(e,o);return function t(e){let o=!1;for(const s of e)s!==n&&V(s)&&(o=!0,t(q(s))||N(s));return o}(t),r},k={setPrototypeOf:()=>!1},A={__proto__:k,apply:()=>{throw v("Constructor cannot be invoked without 'new'")}},D=t=>()=>`(${[...t].map(({name:t})=>O(t))})`,C=n.apply.bind((...t)=>t,null),E=(t,e,o)=>{const n=((t,e)=>({__proto__:e,get(e,o,n){const s=t.find(tt(o));if(void 0!==s)return w(s,o,n)},has:(e,o)=>t.some(tt(o)),set(e,o,n,s){const r=t.find(tt(o));return void 0!==r?P(r,o,n,s):(K(s,o,n,!0,!0),!0)}}))([t,...e],o),s=new y(t,n);return et.set(s,e),s},F=(t,e)=>{const o=t=>{const o=t();return p(s,e),o},n=new y(e,{get:(n,s)=>o(()=>w(t,s,e)),set:(n,s,r)=>o(()=>P(t,s,r,e))}),s=c(n);return s},K=(t,e,o,n=!0,s=!1)=>u(t,e,R(o,n,s,!0)),N=t=>K(t,b,z),R=(t,e,o,n)=>({value:t,writable:e,enumerable:o,configurable:n}),T=(t,e=o,n)=>a(h(t,e,n)),{getPrototypeListOf:W}={getPrototypeListOf:t=>q(t,!0)},q=(t,e)=>{let n=et.get(t);if(n)e&&(n=[...n]);else{const s=l(t);n=null!==s?[s]:e?[]:o}return n},{[b]:z}=class{static[b](t){B=!0;try{if(G(this)){const o=j(this,t);if(!B)return o;if(o||V(t)&&e(this.prototype,t))return!0}return!1}finally{B=!1}}};let B=!1;const G=t=>"function"==typeof t,H=t=>{if(G(t)){const e=$(t);K(e,"prototype",null);try{return(()=>(class extends e{}))(),!0}catch(t){}}return!1},J=t=>!Z.includes(typeof t),Q=t=>void 0===t||J(t),U=t=>null===t||J(t),V=t=>null!==t&&!Q(t),{isPrototypeOf:X}=class{static isPrototypeOf(t){return!(!V(t)||!e(I(this),t))}},Y=t=>{let e;return G(t)&&(({name:e}=t),null!=e&&(e=O(e)))?e:e=O(t)},Z=["function","object","undefined"],tt=t=>e=>t in e,et=new WeakMap;K(S,"name","classes",!1),K(t,"classes",S),K(r,"getPrototypeListOf",W),N(r),K(f,"isPrototypeOf",X)})("undefined"==typeof self?global:self);